import{D as i,f as _}from"./helpers74506.js";import{P as n,Q as d,R as p,S as f,T as c}from"../index74506.js";const D=function(e){return i.fromJSDate(new Date(e)).toFormat("yyyy-LL-dd")},L=function(e){return i.fromFormat(e+"","dd/MM/yyyy").toFormat("yyyy-LL-dd")},v=function(e){return i.fromSeconds(e).toFormat("dd/MM/yyyy")},u=function(e){const t=i.fromJSDate(new Date(e)),s=t.setLocale("it").toFormat("cccc"),o=t.toFormat("d"),r=t.setLocale("it").toFormat("LLLL");return`${s} ${o} ${r}`},y=function(e){const t=i.fromFormat(e,"dd/MM/yyyy"),s=t.setLocale("it").toFormat("cccc"),o=t.toFormat("d"),r=t.setLocale("it").toFormat("LLLL");return`${s} ${o} ${r}`},C=function(e){return u(e).includes("Invalid DateTime")?y(e):u(e)};class a{static async fetchAll(t){const s=new Map(t),o=s.get("location_permalink");return s.delete("location_permalink"),s.delete("name"),s.delete("course"),s.set("api_version","v2"),(await n(`/ticket_office/${o}/orders`,s)).data}static async calendar(t){const s=t.location_permalink;return delete t.location_peramlink,t.api_version="v2",(await d(`/ticket_office/${s}/search/calendar`,t)).data}static async cost(t){return(await d("/cart/cost",t)).data}static async getOrderDetail(t){return(await n(`/orders/${t}`)).data.order}static async createOrder(t){const s=t.get("location_permalink");return t.delete("location_permalink"),(await p(`/ticket_office/${s}/orders`,t)).data.order}static async deleteOrder(t){return(await f(`/orders/${t}`)).data}static async updateOrder(t){return(await d(`/orders/${t.id}/update`,t.formData)).data.order}static async fetchOrderWithOpenTicket(t){const s=new Map(t),o=s.get("location_permalink");return s.delete("location_permalink"),(await n(`/ticket_office/${o}/orders/open`,s)).data}}const T=c({id:"order",state:()=>({order:{},orders:[],response_orders:{},total_orders:Number,calendar:{},discount:{}}),getters:{allOrders:e=>e.response_orders.orders,responseOrders:e=>e.response_orders,getTotalOrders:e=>e.response_orders?e.response_orders.total:0,getCurrentOrder:e=>e.order,status:()=>[{name:"Attivo",value:"true"},{name:"Disattivo",value:"false"}],getCalendar:e=>e.calendar,getDiscount:e=>e.discount},actions:{async fetchAllOrders(e){await a.fetchAll(e).then(t=>this.response_orders=this.filterOrder(t,e))},filterOrder(e,t){if(t.get("course")&&t.get("course")!="Tutti i percorsi"&&(e.time_slots=e.time_slots.filter(s=>s.course_name==t.get("course"))),t.get("hour")&&(e.time_slots=_(t.get("hour"),e.time_slots)),t.get("name")&&t.get("name")!=null){const s={time_slots:[]};return e.time_slots&&e.time_slots.forEach(o=>{let r=!1;o.orders.forEach(l=>{(l.user_name.trim().toLowerCase()===t.get("name").trim().toLowerCase()||l.user_surname.trim().toLowerCase()===t.get("name").trim().toLowerCase())&&(r=!0)}),r&&s.time_slots.push(o)}),s}return e},async fetchOrderDetail(e){await a.getOrderDetail(e).then(t=>this.order=t)},async fetchCalendar(e){await a.calendar(e).then(t=>this.calendar=t)},async createOrder(e){await a.createOrder(e).then(t=>this.order=t)},async cost(e){await a.cost(e).then(t=>this.discount=t)},async updateOrder(e){await a.updateOrder(e).then(t=>this.order=t)},async deleteOrder(e){await a.deleteOrder(e).then(t=>this.order=t)},async fetchOrderWithOpenTicket(e){await a.fetchOrderWithOpenTicket(e).then(t=>this.response_orders=t)}}}),A=c({id:"newOrderDialog",state:()=>({_showNewOrderDialog:!1}),getters:{showNewOrderDialog:e=>e._showNewOrderDialog},actions:{setNewOrderDialogVisibility(e){this.updateNewOrderDialog(e)},updateNewOrderDialog(e){this._showNewOrderDialog=e}}});class h{static async fetchAll(){return(await n("/locations/select?online=true")).data}}const F=c({id:"location",state:()=>({location:{},locations:[],response_locations:{}}),getters:{allLocations:e=>e.response_locations.locations,responseLocations:e=>e.response_locations,getTotalLocations:e=>e.response_locations?e.response_locations.total:0,getCurrentLocation:e=>e.location},actions:{async fetchAllLocations(){await h.fetchAll().then(e=>this.response_locations=e)}}});class m{static async fetchAll(t){const s=t.get("location_permalink");return t.delete("location_permalink"),t.set("api_version","v2"),(await n(`/ticket_office/${s}/courses`,t)).data}}const S=c({id:"course",state:()=>({course:{},courses:[],response_courses:{}}),getters:{allCourses:e=>e.response_courses.tickets,responseCourses:e=>e.response_courses,getTotalCourses:e=>e.response_courses?e.response_courses.total:0,getCurrentCourse:e=>e.course},actions:{async fetchAllCourses(e){await m.fetchAll(e).then(t=>this.response_courses=t)}}});class w{static async fetchAll(t){const s=t.get("location_permalink");return t.delete("location_permalink"),t.set("api_version","v2"),(await n(`/ticket_office/${s}/tickets`,t)).data}}const $=c({id:"ticket",state:()=>({ticket:{},tickets:[],response_tickets:{}}),getters:{allTickets:e=>e.response_tickets.tickets,responseTickets:e=>e.response_tickets,getTotalTickets:e=>e.response_tickets?e.response_tickets.total:0,getCurrentTicket:e=>e.ticket},actions:{async fetchAllTickets(e){await w.fetchAll(e).then(t=>this.response_tickets=t)}}});class g{static async fetchAll(){return(await n("/countries")).data.countries}}const N=c({id:"country",state:()=>({country:{},countries:[]}),getters:{allCountries:e=>e.countries},actions:{async fetchAllCountries(){await g.fetchAll().then(e=>this.countries=e)}}});export{A as a,D as b,v as c,F as d,N as e,L as f,$ as g,u as h,C as i,S as j,T as u};
